# Configuration Stockage Cloud - David Irie Photographie

## üéØ Architecture Choisie

### **2 TB Backblaze B2 + Cloudinary + Cloudflare**
- **Co√ªt total : ~10‚Ç¨/mois**
- **Capacit√© : 2 TB** (photos + vid√©os)
- **Rotation : 1 an** (suppression automatique)

---

## üì¶ Services Utilis√©s

### 1. **Cloudinary (Gratuit - 25 GB)**
**Usage :** Photos d'inspiration du formulaire de contact

- Upload temporaire
- Email avec liens
- Suppression apr√®s t√©l√©chargement

### 2. **Backblaze B2 (2 TB - ~10‚Ç¨/mois)**
**Usage :** Galeries priv√©es (photos + vid√©os finales)

- Stockage permanent (1 an)
- Protection par mot de passe
- URLs directes pour clients

### 3. **Cloudflare (Gratuit)**
**Usage :** CDN pour acc√©l√©ration mondiale

- Bande passante gratuite illimit√©e
- Cache intelligent
- Distribution rapide

---

## üîß √âTAPE 1 : Configuration Cloudinary

### A. Cr√©er le compte (5 min)

1. Aller sur https://cloudinary.com/users/register_free
2. S'inscrire avec ton email professionnel
3. Plan : **Free** (25 GB)

### B. R√©cup√©rer les cl√©s

1. Dashboard ‚Üí Settings (‚öôÔ∏è) ‚Üí Account
2. Noter ces 3 valeurs :

```
Cloud Name: __________________
API Key: ______________________
API Secret: ___________________
```

### C. Configurer dans Netlify

Ajouter ces variables d'environnement :

```
CLOUDINARY_CLOUD_NAME=ton_cloud_name
CLOUDINARY_API_KEY=ta_api_key
CLOUDINARY_API_SECRET=ton_api_secret
```

---

## üîß √âTAPE 2 : Configuration Backblaze B2

### A. Cr√©er le compte (10 min)

1. Aller sur https://www.backblaze.com/b2/sign-up.html
2. S'inscrire
3. V√©rifier l'email

### B. Cr√©er un Bucket

1. Dashboard ‚Üí **Buckets** ‚Üí **Create a Bucket**
2. Param√®tres :
   ```
   Bucket Name: david-irie-galeries-privees
   Files in Bucket: Private
   Default Encryption: Disable
   Object Lock: Disable
   ```
3. Cliquer **Create a Bucket**

### C. Cr√©er une Application Key

1. Dashboard ‚Üí **App Keys** ‚Üí **Add a New Application Key**
2. Param√®tres :
   ```
   Name of Key: netlify-functions
   Allow access to Bucket: david-irie-galeries-privees
   Type of Access: Read and Write
   Allow List All Bucket Names: ‚úì
   File name prefix: (laisser vide)
   Duration: (laisser vide = permanent)
   ```
3. **IMPORTANT** : Copier imm√©diatement (visible 1 seule fois !)
   ```
   keyID: ______________________
   applicationKey: ______________
   ```

### D. Noter l'Endpoint

Format : `s3.us-west-004.backblazeb2.com`
(varie selon ta r√©gion)

### E. Configurer dans Netlify

Ajouter ces variables d'environnement :

```
B2_KEY_ID=ton_key_id
B2_APPLICATION_KEY=ton_application_key
B2_BUCKET_NAME=david-irie-galeries-privees
B2_ENDPOINT=s3.us-west-004.backblazeb2.com
B2_REGION=us-west-004
```

---

## üîß √âTAPE 3 : Configuration Cloudflare (Optionnel mais recommand√©)

### Pourquoi ?
- ‚úÖ Bande passante **gratuite** illimit√©e
- ‚úÖ Fichiers servis **10x plus vite**
- ‚úÖ Cache intelligent

### A. Cr√©er compte Cloudflare

1. https://dash.cloudflare.com/sign-up
2. Plan gratuit

### B. Lier √† Backblaze

1. Cloudflare ‚Üí **R2** ‚Üí **Create Bucket**
   - Ou utiliser **Bandwidth Alliance**
2. Suivre guide : https://www.backblaze.com/b2/docs/cloudflare.html

**Note :** Configuration technique, peut √™tre fait plus tard.

---

## üìä Monitoring & Gestion

### Dashboard Backblaze

- **Browse Files** : Voir tous les fichiers
- **Lifecycle Settings** : Configurer suppression auto apr√®s 365 jours
- **Usage** : Voir stockage utilis√©

### Lifecycle Rule (Suppression auto apr√®s 1 an)

1. Bucket ‚Üí **Lifecycle Settings**
2. **Add a New Rule** :
   ```
   Rule Name: auto-delete-old-galleries
   File Name Prefix: (vide = tout)
   Keep only the last: 1 version
   Keep prior versions for: 365 days
   ```
3. Save

---

## üí∞ Estimation Co√ªts

### Mois par Mois

| Mois | Clients | Photos | Vid√©os | Stockage | Co√ªt |
|------|---------|--------|--------|----------|------|
| 1-3 | 30 | 15 GB | 30 GB | 45 GB | **~0.23‚Ç¨** |
| 4-6 | 60 | 30 GB | 60 GB | 90 GB | **~0.45‚Ç¨** |
| 7-12 | 120 | 60 GB | 120 GB | 180 GB | **~0.90‚Ç¨** |
| An 2 | 120 | 150 GB | 300 GB | 450 GB | **~2.25‚Ç¨** |
| An 3+ | 120 | 200 GB | 400 GB | 600 GB | **~3‚Ç¨** |

**Avec vid√©os 4K** (si applicable) :
- Ann√©es 5-10 : **~10‚Ç¨/mois** (proche du max 2 TB)

### Backblaze Pricing Exact

```
Stockage : $0.005/GB/mois
1 GB = 0.005‚Ç¨
1 TB (1000 GB) = 5‚Ç¨/mois
2 TB = 10‚Ç¨/mois
```

---

## ‚ö†Ô∏è Notes Importantes

### S√©curit√©

1. **Ne jamais** commit les cl√©s dans Git
2. **Toujours** utiliser variables d'environnement Netlify
3. **Activer** 2FA sur Backblaze et Cloudinary

### Backup

- Backblaze = stockage cloud (pas un backup)
- **Recommandation** : Backup local sur disque dur externe
- RAW originaux : stocker localement

### Bande Passante

- Backblaze seul : **1√®re GB/jour gratuite**, puis $0.01/GB
- **Avec Cloudflare** : **TOUT gratuit** ‚úÖ

---

## üöÄ Prochaines √âtapes

Apr√®s avoir compl√©t√© cette configuration :

1. ‚úÖ Tester upload Cloudinary (formulaire contact)
2. ‚úÖ Tester upload Backblaze (galerie priv√©e test)
3. ‚úÖ V√©rifier lifecycle rules
4. ‚úÖ Tester t√©l√©chargement client
5. ‚úÖ Monitorer premier mois

---

## üìû Support

### Backblaze
- Email : help@backblaze.com
- Chat : Dans le dashboard
- Doc : https://www.backblaze.com/b2/docs/

### Cloudinary
- Support : https://support.cloudinary.com
- Doc : https://cloudinary.com/documentation

### Probl√®mes ?
- V√©rifier variables d'environnement Netlify
- V√©rifier permissions Bucket (Private)
- V√©rifier Application Key (Read + Write)
